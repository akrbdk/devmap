## Строитель (Builder)

Паттерн Builder относится к порождающим паттернам уровня объекта.

Паттерн Builder определяет процесс поэтапного построения сложного продукта. После того как будет построена последняя его
часть,
продукт можно использовать.

## Пример

В примере паттерна Abstract Factory приводился пример двух фабрик Кока-Кола и Перси. Возьмем одну фабрику, она
производит сложный продукт,
состоящий из 4 частей (крышка, бутылка, этикетка, напиток), которые должны быть применены в нужном порядке. Нельзя
вначале взять крышку,  
бутылку, завинтить крышку, а потом пытаться налить туда напиток. Для реализации объекта, бутылки Кока-Колы, которая
поставляется клиенту,
нам нужен паттерн Builder.

Важно понимать, что сложный объект это не обязательно объект оперирующий несколькими другими объектами в смысле ООП.
Например, нам нужно
получить документ состоящий из заголовка, введения, содержания и заключения. Наш документ, это сложный объект. Что бы
был какой-то единый
порядок составления документа, мы будем использовать паттерн Builder.

Требуется для реализации:

1. Класс Director, который будет распоряжаться строителем и отдавать ему команды в нужном порядке, а строитель будет их
   выполнять;
2. Базовый абстрактный класс Builder, который описывает интерфейс строителя, те команды, которые он обязан выполнять;
3. Класс ConcreteBuilder, который реализует интерфейс строителя и взаимодействует со сложным объектом;
4. Класс сложного объекта Product.

## Пример из реальной жизни

    Одним из лучших применений паттерна Строитель является конструктор запросов SQL. Интерфейс Строителя определяет общие 
    шаги, необходимые для построения основного SQL-запроса. В тоже время Конкретные Строители, соответствующие различным 
    диалектам SQL, реализуют эти шаги, возвращая части SQL-запросов, которые могут быть выполнены в данном движке базы данных.

## Преимущества и недостатки

    + Позволяет создавать продукты пошагово.
    + Позволяет использовать один и тот же код для создания различных продуктов.
    + Изолирует сложный код сборки продукта от его основной бизнес-логики.

    - Усложняет код программы из-за введения дополнительных классов.
    - Клиент будет привязан к конкретным классам строителей, так как в интерфейсе директора может не быть метода получения результата.

## Отношения с другими паттернами

1. Многие архитектуры начинаются с применения `Фабричного метода` (более простого и расширяемого через подклассы) и
   эволюционируют в сторону `Абстрактной фабрики`, `Прототипа` или `Строителя` (более гибких, но и более сложных).
2. `Строитель` концентрируется на построении сложных объектов шаг за шагом. `Абстрактная фабрика` специализируется на
   создании семейств связанных продуктов. `Строитель` возвращает продукт только после выполнения всех шагов, а
   `Абстрактная фабрика` возвращает продукт сразу же.
3. `Строитель` позволяет пошагово сооружать дерево `Компоновщика`.
4. Паттерн `Строитель` может быть построен в виде `Моста`: директор будет играть роль абстракции, а строители —
   реализации.
5. `Абстрактная фабрика`, `Строитель` и `Прототип` могут быть реализованы при помощи Одиночки.

